import{u as y}from"./shopStore-5e5560f7.js";import{_ as N}from"./index-84aac008.js";import"./vendor-7ce8fbae.js";const C={class:"classification"},k={class:"classification-list"},E=["onClick"],S=["src"],w={class:"flex flex-1 flex-col justify-between"},b={class:"flex items-center justify-between"},B={class:"font-bold"},L={class:"text-xs text-red-500 font-bold"},D={class:"mt-1 flex flex-wrap gap-4 text-xs text-gray-600"},I=Vue.defineComponent({name:"classification",__name:"classifica",setup(R){const u=y(),V=VueRouter.useRoute(),c=VueRouter.useRouter(),i=Vue.ref(u.baseAddress.code),a=Vue.ref([]),l=Vue.ref(0),r=Vue.ref(0),_=Vue.computed(()=>{var t;return(t=d.find(e=>e.value==l.value))==null?void 0:t.text});Vue.onMounted(()=>{p(V.query.classificationId)});const d=[{text:"全部",value:0},{text:"美食",value:1},{text:"饮品",value:2},{text:"甜品",value:3},{text:"鲜花",value:4},{text:"下午茶",value:5},{text:"超市",value:6},{text:"药品",value:7},{text:"买菜",value:8}],v=[{text:"默认排序",value:0},{text:"好评排序",value:1},{text:"起送费排序",value:2}],f=t=>{c.push({path:"/Commodity_details",query:{shopsId:t}})},p=t=>{console.log(typeof t,"分类"),r.value=0,a.value=(u.shopsList||[]).filter((e,s)=>e.addressCode==i.value&&e.classificationType==t)},m=t=>{console.log(t,"排序");let e=JSON.parse(JSON.stringify(u.shopsList));e=e.filter((s,n)=>s.addressCode==i.value),l.value&&(e=e.filter((s,n)=>s.classificationType==l.value)),t==1?(console.log(e,"shopsList1==="),e.sort((s,n)=>n.score-s.score)):t==2&&e.sort((s,n)=>s.freight-n.freight),a.value=e};return(t,e)=>{const s=Vue.resolveComponent("van-nav-bar"),n=Vue.resolveComponent("van-dropdown-item"),x=Vue.resolveComponent("van-dropdown-menu"),h=Vue.resolveComponent("van-empty");return Vue.openBlock(),Vue.createElementBlock("div",C,[Vue.createVNode(s,{title:_.value,"left-text":"返回","left-arrow":"",onClickLeft:e[0]||(e[0]=o=>Vue.unref(c).go(-1))},null,8,["title"]),Vue.createVNode(x,null,{default:Vue.withCtx(()=>[Vue.createVNode(n,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value=o),options:d,onChange:p},null,8,["modelValue"]),Vue.createVNode(n,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=o=>r.value=o),options:v,onChange:m},null,8,["modelValue"])]),_:1}),Vue.createElementVNode("div",k,[a.value.length==0?(Vue.openBlock(),Vue.createBlock(h,{key:0,description:"暂无商铺"})):Vue.createCommentVNode("",!0),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(a.value,(o,g)=>(Vue.openBlock(),Vue.createElementBlock("div",{key:g,class:"classification-list-item flex gap-4",onClick:T=>f(o.shopsId)},[Vue.createElementVNode("img",{src:o.shopsImage,alt:"",srcset:"",class:"w-1/3 min-h-[80px] rounded-[10px]"},null,8,S),Vue.createElementVNode("div",w,[Vue.createElementVNode("p",b,[Vue.createElementVNode("span",B,Vue.toDisplayString(o.shopsName),1),Vue.createElementVNode("span",L,Vue.toDisplayString(o.score),1)]),Vue.createElementVNode("p",D,[Vue.createElementVNode("span",null,"起送："+Vue.toDisplayString(o.shopsStart),1),Vue.createElementVNode("span",null,"运费："+Vue.toDisplayString(o.freight),1)])])],8,E))),128))])])}}});const O=N(I,[["__scopeId","data-v-cba1a0aa"]]);export{O as default};
