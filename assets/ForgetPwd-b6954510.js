import{_ as b,u as f,b as v,d as V,t as y,r as d,o as h,c as S,a,w as u,h as c,T as i,l as m,p as k,m as q}from"./index-ff975386.js";const A={name:"",components:{},setup(e,{root:o}){const w=f(),l=v(),p=V({username:"",password:"",passwordAgain:"",secret:""}),g=async s=>{console.log("submit",s);let n=await l.dispatch("forgetPwd",s);i.loading({message:"修改密码中...",forbidClick:!0}),setTimeout(()=>{i.clear(),n.code==1?(i.success("修改成功，请登录"),w.push({path:"/Login"}),console.log(l.state.userList)):i.fail(n.msg)},1e3)},r=s=>s==p.password;return{...y(p),onSubmit:g,Validator:r}}},C=e=>(k("data-v-ebd3659b"),e=e(),q(),e),I={class:"wsw-login"},T={class:"wsw-login-body"},U=C(()=>c("div",{class:"wsw-login-footer"},"Copyright © 移应2018-1-21吴尚尉",-1));function B(e,o,w,l,p,g){const r=d("router-link"),s=d("van-field"),n=d("van-button"),_=d("van-form");return h(),S("div",I,[a(r,{tag:"span",to:"/",class:"wsw-login-title"},{default:u(()=>[m("饿了么")]),_:1}),c("div",T,[a(_,{onSubmit:l.onSubmit},{default:u(()=>[a(s,{modelValue:e.username,"onUpdate:modelValue":o[0]||(o[0]=t=>e.username=t),name:"username",label:"账号",placeholder:"请输入账号",rules:[{required:!0,message:"请填写账号"}]},null,8,["modelValue"]),a(s,{modelValue:e.secret,"onUpdate:modelValue":o[1]||(o[1]=t=>e.secret=t),type:"secret",name:"secret",label:"暗号",placeholder:"请输入暗号",rules:[{required:!0,message:"请填写暗号"}]},null,8,["modelValue"]),a(s,{modelValue:e.password,"onUpdate:modelValue":o[2]||(o[2]=t=>e.password=t),type:"password",name:"password",label:"新密码",placeholder:"请输入新密码",rules:[{required:!0,message:"请填写新密码"}]},null,8,["modelValue"]),a(s,{modelValue:e.passwordAgain,"onUpdate:modelValue":o[3]||(o[3]=t=>e.passwordAgain=t),type:"password",name:"passwordAgain",label:"新密码确认",placeholder:"再次输入新密码",rules:[{required:!0,message:"请确认新密码"},{validator:l.Validator,message:"请输入正确新密码"}]},null,8,["modelValue","rules"]),c("div",null,[a(r,{to:"/Login",tag:"a",class:"wsw-r"},{default:u(()=>[m("返回")]),_:1})]),a(n,{round:"",block:"",plain:"",type:"info","native-type":"submit",color:"#ed9428"},{default:u(()=>[m("提交")]),_:1})]),_:1},8,["onSubmit"])]),U])}const N=b(A,[["render",B],["__scopeId","data-v-ebd3659b"]]);export{N as default};
