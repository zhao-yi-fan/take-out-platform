import{resolveComponent as E,openBlock as d,createBlock as _,withCtx as I,KeepAlive as v,resolveDynamicComponent as f,createApp as y}from"vue";import{d as P,c as R,a as O,s as A,b as D,e as U,f as T,i as V,r as B}from"./vendor-f4352496.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();const k="modulepreload",S=function(e,t){return new URL(e,t).href},h={},i=function(t,o,n){if(!o||o.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(o.map(s=>{if(s=S(s,n),s in h)return;h[s]=!0;const a=s.endsWith(".css"),w=a?'[rel="stylesheet"]':"";if(!!n)for(let m=r.length-1;m>=0;m--){const l=r[m];if(l.href===s&&(!a||l.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${w}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":k,a||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),a)return new Promise((m,l)=>{c.addEventListener("load",m),c.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())};const b=(e,t)=>{const o=e.__vccOpts||e;for(const[n,r]of t)o[n]=r;return o},x={};function N(e,t){const o=E("router-view");return d(),_(o,null,{default:I(({Component:n})=>[e.$route.meta.keepAlive?(d(),_(v,{key:0},[(d(),_(f(n)))],1024)):(d(),_(f(n),{key:1}))]),_:1})}const C=b(x,[["render",N]]),$=P("user",{state:()=>({userList:[{userId:1,username:"admin",password:"123456",secret:"111"},{userId:2,username:"zhangsan",password:"123456",secret:""}],loginInfo:null}),getters:{isLogin(){return!!this.loginInfo}},actions:{_findUserByUsername(e){return this.userList.find(t=>t.username===e)},_findUserById(e){return this.userList.find(t=>t.userId===e)},_generateNewUserId(){return this.userList.length===0?1:this.userList[this.userList.length-1].userId+1},setLoginInfo(e){this.loginInfo=e},login(e){const{username:t,password:o}=e,n=this._findUserByUsername(t);return n?n.password!==o?{success:!1,msg:"密码错误"}:(this.loginInfo=n,{success:!0}):{success:!1,msg:"用户不存在"}},register(e){const{username:t,password:o,secret:n}=e;if(this._findUserByUsername(t))return{success:!1,msg:"用户名已存在"};const r=this._generateNewUserId();return this.userList.push({userId:r,username:t,password:o,secret:n}),{success:!0,msg:"注册成功"}},setUserList(e=[]){this.userList=e},forgetPwd(e){const{username:t,password:o,secret:n}=e,r=this._findUserByUsername(t);return r?r.secret!==n?{code:2,msg:"修改失败，暗号错误！"}:(r.password=o,{code:1,msg:"修改成功！"}):{code:3,msg:"修改失败，用户名不存在！"}},setPwd(e){const{userId:t,rawPassword:o,password:n,rePassword:r}=e;if(n!==r)return{code:2,msg:"两次密码输入不一致，请检查后重新提交！"};const s=this._findUserById(t);return s?s.password!==o?{code:2,msg:"原密码输入错误，请检查后重新提交！"}:s.password===n?{code:2,msg:"原密码和新密码不能一样！"}:(s.password=n,{code:1,msg:"修改成功！"}):{code:2,msg:"用户不存在，非法操作！"}}},persist:!0}),F=[{path:"/",redirect:"/home/index"},{path:"/home",name:"home",component:()=>i(()=>import("./home-60f56b89.js"),["./home-60f56b89.js","./prompt-aa444c47.js","./prompt-7c017c22.css","./TabBar.vue_vue_type_script_setup_true_lang-cad8c7ab.js","./vendor-f4352496.js","./vendor-b2d7e433.css","./home-f5db376c.css"],import.meta.url),children:[{path:"/home/index",name:"index",component:()=>i(()=>import("./index-5dbb55c6.js"),["./index-5dbb55c6.js","./vendor-f4352496.js","./vendor-b2d7e433.css","./shopStore-b0d46d75.js","./index-1399b818.css"],import.meta.url)},{path:"/home/order",name:"order",component:()=>i(()=>import("./order-7febe857.js"),["./order-7febe857.js","./orderStore-fe5f7174.js","./vendor-f4352496.js","./vendor-b2d7e433.css","./shopStore-b0d46d75.js","./order-95ea05d4.css"],import.meta.url)},{path:"/home/user",name:"user",component:()=>i(()=>import("./user-13bf3273.js"),["./user-13bf3273.js","./vendor-f4352496.js","./vendor-b2d7e433.css","./user-c03e5fd4.css"],import.meta.url)},{path:"/home/classifica",name:"classifica",component:()=>i(()=>import("./classifica-151fcbb1.js"),["./classifica-151fcbb1.js","./vendor-f4352496.js","./vendor-b2d7e433.css","./shopStore-b0d46d75.js","./classifica-ff31ba1d.css"],import.meta.url)}]},{path:"/commodityDetail",name:"commodityDetail",component:()=>i(()=>import("./commodityDetail-74c1cee3.js"),["./commodityDetail-74c1cee3.js","./vendor-f4352496.js","./vendor-b2d7e433.css","./prompt-aa444c47.js","./prompt-7c017c22.css","./orderStore-fe5f7174.js","./shopStore-b0d46d75.js","./collectionStore-1b076e13.js","./commodityDetail-fdef41a8.css"],import.meta.url)},{path:"/billDetail",name:"billDetail",component:()=>i(()=>import("./billDetail-95b4d42f.js"),["./billDetail-95b4d42f.js","./vendor-f4352496.js","./vendor-b2d7e433.css","./shopStore-b0d46d75.js","./orderStore-fe5f7174.js","./billDetail-964718e4.css"],import.meta.url)},{path:"/comment",name:"comment",component:()=>i(()=>import("./comment-4d248eca.js"),["./comment-4d248eca.js","./vendor-f4352496.js","./vendor-b2d7e433.css","./shopStore-b0d46d75.js","./orderStore-fe5f7174.js","./comment-8f38c9a2.css"],import.meta.url)},{path:"/collect",name:"collect",component:()=>i(()=>import("./collect-d3e0bc21.js"),["./collect-d3e0bc21.js","./vendor-f4352496.js","./vendor-b2d7e433.css","./shopStore-b0d46d75.js","./collectionStore-1b076e13.js","./collect-4fd8a42f.css"],import.meta.url)},{path:"/setting",name:"setting",component:()=>i(()=>import("./setting-d12b8d0d.js"),["./setting-d12b8d0d.js","./vendor-f4352496.js","./vendor-b2d7e433.css","./setting-203f84dd.css"],import.meta.url)},{path:"/setPwd",name:"setPwd",component:()=>i(()=>import("./setPwd-9888e556.js"),["./setPwd-9888e556.js","./vendor-f4352496.js","./vendor-b2d7e433.css","./setPwd-afb791b7.css"],import.meta.url)},{path:"/search",name:"search",component:()=>i(()=>import("./search-f1f72951.js"),["./search-f1f72951.js","./TabBar.vue_vue_type_script_setup_true_lang-cad8c7ab.js","./vendor-f4352496.js","./vendor-b2d7e433.css","./shopStore-b0d46d75.js","./search-7de4bc37.css"],import.meta.url),meta:{keepAlive:!0}},{path:"/newLogin",name:"Login",component:()=>i(()=>import("./NewLogin-f46c8a04.js"),["./NewLogin-f46c8a04.js","./vendor-f4352496.js","./vendor-b2d7e433.css","./NewLogin-892d16af.css"],import.meta.url)},{path:"/newRegister",name:"Register",component:()=>i(()=>import("./NewRegister-4b2864ad.js"),["./NewRegister-4b2864ad.js","./vendor-f4352496.js","./vendor-b2d7e433.css","./NewRegister-0ce743d5.css"],import.meta.url)},{path:"/forgetPwd",name:"ForgetPwd",component:()=>i(()=>import("./forgetPwd-5ec18ced.js"),["./forgetPwd-5ec18ced.js","./vendor-f4352496.js","./vendor-b2d7e433.css","./forgetPwd-b4a94586.css"],import.meta.url)}],p=R({history:O(),routes:F});p.beforeEach(async(e,t)=>$().isLogin||["index","Login","Register","ForgetPwd"].includes(e.name)?!0:(A("您未登录"),setTimeout(()=>{p.push({name:"Login"})},1e3),!1));const g=""+new URL("img-error-7e6c3f6c.png",import.meta.url).href,q=""+new URL("loading-a89c280e.gif",import.meta.url).href;window.__imgErrorList__=window.__imgErrorList__||[];window.addEventListener("error",e=>{const t=e.target;if(t&&t.tagName==="IMG"){const o=t;console.error("图片加载失败：",o.src),window.__imgErrorList__.push({src:o.src,time:Date.now(),element:o}),o.src=g}},!0);const L=D();L.use(U({key:e=>`__persisted__${e}`}));const u=y(C);u.use(p);u.use(T);u.use(L);u.use(V,{loading:q,error:g});u.mount("#app");B({router:p,DURATION:12e4,callback:()=>{console.log("检测到新版本，请刷新页面")}});export{b as _,$ as u};
