import{resolveComponent as E,openBlock as l,createBlock as d,withCtx as I,KeepAlive as w,resolveDynamicComponent as f,createApp as v}from"vue";import{d as y,c as P,a as R,s as O,b as A,e as D,f as T,r as U}from"./vendor-07b48c72.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();const V="modulepreload",B=function(e,s){return new URL(e,s).href},h={},i=function(s,n,o){if(!n||n.length===0)return s();const t=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=B(r,o),r in h)return;h[r]=!0;const a=r.endsWith(".css"),L=a?'[rel="stylesheet"]':"";if(!!o)for(let u=t.length-1;u>=0;u--){const m=t[u];if(m.href===r&&(!a||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${L}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":V,a||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),a)return new Promise((u,m)=>{c.addEventListener("load",u),c.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>s())};const k=(e,s)=>{const n=e.__vccOpts||e;for(const[o,t]of s)n[o]=t;return n},S={};function b(e,s){const n=E("router-view");return l(),d(n,null,{default:I(({Component:o})=>[e.$route.meta.keepAlive?(l(),d(w,{key:0},[(l(),d(f(o)))],1024)):(l(),d(f(o),{key:1}))]),_:1})}const x=k(S,[["render",b]]),N=y("user",{state:()=>({userList:[{userId:1,username:"admin",password:"123456",secret:"111"},{userId:2,username:"zhangsan",password:"123456",secret:""}],loginInfo:null}),getters:{isLogin(){return!!this.loginInfo}},actions:{_findUserByUsername(e){return this.userList.find(s=>s.username===e)},_findUserById(e){return this.userList.find(s=>s.userId===e)},_generateNewUserId(){return this.userList.length===0?1:this.userList[this.userList.length-1].userId+1},setLoginInfo(e){this.loginInfo=e},login(e){const{username:s,password:n}=e,o=this._findUserByUsername(s);return o?o.password!==n?{success:!1,msg:"密码错误"}:(this.loginInfo=o,{success:!0}):{success:!1,msg:"用户不存在"}},register(e){const{username:s,password:n,secret:o}=e;if(this._findUserByUsername(s))return{success:!1,msg:"用户名已存在"};const t=this._generateNewUserId();return this.userList.push({userId:t,username:s,password:n,secret:o}),{success:!0,msg:"注册成功"}},setUserList(e=[]){this.userList=e},forgetPwd(e){const{username:s,password:n,secret:o}=e,t=this._findUserByUsername(s);return t?t.secret!==o?{code:2,msg:"修改失败，暗号错误！"}:(t.password=n,{code:1,msg:"修改成功！"}):{code:3,msg:"修改失败，用户名不存在！"}},setPwd(e){const{userId:s,rawPassword:n,password:o,rePassword:t}=e;if(o!==t)return{code:2,msg:"两次密码输入不一致，请检查后重新提交！"};const r=this._findUserById(s);return r?r.password!==n?{code:2,msg:"原密码输入错误，请检查后重新提交！"}:r.password===o?{code:2,msg:"原密码和新密码不能一样！"}:(r.password=o,{code:1,msg:"修改成功！"}):{code:2,msg:"用户不存在，非法操作！"}}},persist:!0}),C=[{path:"/",redirect:"/home/index"},{path:"/home",name:"home",component:()=>i(()=>import("./home-bc26b05c.js"),["./home-bc26b05c.js","./prompt-1b742e92.js","./prompt-7c017c22.css","./TabBar.vue_vue_type_script_setup_true_lang-d6444cbb.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./home-f5db376c.css"],import.meta.url),children:[{path:"/home/index",name:"index",component:()=>i(()=>import("./index-bfc2b390.js"),["./index-bfc2b390.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./shopStore-2f5b3dd3.js","./index-90f4d74d.css"],import.meta.url)},{path:"/home/order",name:"order",component:()=>i(()=>import("./order-02125d2b.js"),["./order-02125d2b.js","./orderStore-7149aad0.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./shopStore-2f5b3dd3.js","./order-5c7a9853.css"],import.meta.url)},{path:"/home/user",name:"user",component:()=>i(()=>import("./user-c94735f5.js"),["./user-c94735f5.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./user-c03e5fd4.css"],import.meta.url)},{path:"/home/classifica",name:"classifica",component:()=>i(()=>import("./classifica-315e9030.js"),["./classifica-315e9030.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./shopStore-2f5b3dd3.js","./classifica-ff31ba1d.css"],import.meta.url)}]},{path:"/commodityDetail",name:"commodityDetail",component:()=>i(()=>import("./commodityDetail-f8b2df0b.js"),["./commodityDetail-f8b2df0b.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./prompt-1b742e92.js","./prompt-7c017c22.css","./orderStore-7149aad0.js","./shopStore-2f5b3dd3.js","./collectionStore-0ed559c2.js","./commodityDetail-fdef41a8.css"],import.meta.url)},{path:"/billDetail",name:"billDetail",component:()=>i(()=>import("./billDetail-eeb66a64.js"),["./billDetail-eeb66a64.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./shopStore-2f5b3dd3.js","./orderStore-7149aad0.js","./billDetail-964718e4.css"],import.meta.url)},{path:"/comment",name:"comment",component:()=>i(()=>import("./comment-e660fcb1.js"),["./comment-e660fcb1.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./shopStore-2f5b3dd3.js","./orderStore-7149aad0.js","./comment-8f38c9a2.css"],import.meta.url)},{path:"/collect",name:"collect",component:()=>i(()=>import("./collect-983b131c.js"),["./collect-983b131c.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./shopStore-2f5b3dd3.js","./collectionStore-0ed559c2.js","./collect-4fd8a42f.css"],import.meta.url)},{path:"/setting",name:"setting",component:()=>i(()=>import("./setting-a2098023.js"),["./setting-a2098023.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./setting-203f84dd.css"],import.meta.url)},{path:"/setPwd",name:"setPwd",component:()=>i(()=>import("./setPwd-67606c65.js"),["./setPwd-67606c65.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./setPwd-afb791b7.css"],import.meta.url)},{path:"/search",name:"search",component:()=>i(()=>import("./search-87e76f1d.js"),["./search-87e76f1d.js","./TabBar.vue_vue_type_script_setup_true_lang-d6444cbb.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./shopStore-2f5b3dd3.js","./search-7de4bc37.css"],import.meta.url),meta:{keepAlive:!0}},{path:"/newLogin",name:"Login",component:()=>i(()=>import("./NewLogin-21cf72d5.js"),["./NewLogin-21cf72d5.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./NewLogin-892d16af.css"],import.meta.url)},{path:"/newRegister",name:"Register",component:()=>i(()=>import("./NewRegister-050bf30a.js"),["./NewRegister-050bf30a.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./NewRegister-0ce743d5.css"],import.meta.url)},{path:"/forgetPwd",name:"ForgetPwd",component:()=>i(()=>import("./forgetPwd-f64407b4.js"),["./forgetPwd-f64407b4.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./forgetPwd-b4a94586.css"],import.meta.url)}],p=P({history:R(),routes:C});p.beforeEach(async(e,s)=>N().isLogin||["index","Login","Register","ForgetPwd"].includes(e.name)?!0:(O("您未登录"),setTimeout(()=>{p.push({name:"Login"})},1e3),!1));const g=A();g.use(D({key:e=>`__persisted__${e}`}));const _=v(x);_.use(p);_.use(T);_.use(g);_.mount("#app");U({router:p,DURATION:12e4,callback:()=>{console.log("检测到新版本，请刷新页面")}});export{k as _,N as u};
