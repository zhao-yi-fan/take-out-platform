import{resolveComponent as E,openBlock as l,createBlock as p,withCtx as I,KeepAlive as w,resolveDynamicComponent as f,createApp as v}from"vue";import{d as y,c as P,a as R,r as O}from"./vendor-aa74e335.js";import{createRouter as A,createWebHashHistory as D}from"vue-router";import T,{showToast as U}from"vant";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();const V="modulepreload",B=function(e,s){return new URL(e,s).href},h={},i=function(s,n,o){if(!n||n.length===0)return s();const t=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=B(r,o),r in h)return;h[r]=!0;const a=r.endsWith(".css"),L=a?'[rel="stylesheet"]':"";if(!!o)for(let u=t.length-1;u>=0;u--){const m=t[u];if(m.href===r&&(!a||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${L}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":V,a||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),a)return new Promise((u,m)=>{c.addEventListener("load",u),c.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>s())};const k=(e,s)=>{const n=e.__vccOpts||e;for(const[o,t]of s)n[o]=t;return n},S={};function b(e,s){const n=E("router-view");return l(),p(n,null,{default:I(({Component:o})=>[e.$route.meta.keepAlive?(l(),p(w,{key:0},[(l(),p(f(o)))],1024)):(l(),p(f(o),{key:1}))]),_:1})}const x=k(S,[["render",b]]),N=y("user",{state:()=>({userList:[{userId:1,username:"admin",password:"123456",secret:"111"},{userId:2,username:"zhangsan",password:"123456",secret:""}],loginInfo:null}),getters:{isLogin(){return!!this.loginInfo}},actions:{_findUserByUsername(e){return this.userList.find(s=>s.username===e)},_findUserById(e){return this.userList.find(s=>s.userId===e)},_generateNewUserId(){return this.userList.length===0?1:this.userList[this.userList.length-1].userId+1},setLoginInfo(e){this.loginInfo=e},login(e){const{username:s,password:n}=e,o=this._findUserByUsername(s);return o?o.password!==n?{success:!1,msg:"密码错误"}:(this.loginInfo=o,{success:!0}):{success:!1,msg:"用户不存在"}},register(e){const{username:s,password:n,secret:o}=e;if(this._findUserByUsername(s))return{success:!1,msg:"用户名已存在"};const t=this._generateNewUserId();return this.userList.push({userId:t,username:s,password:n,secret:o}),{success:!0,msg:"注册成功"}},setUserList(e=[]){this.userList=e},forgetPwd(e){const{username:s,password:n,secret:o}=e,t=this._findUserByUsername(s);return t?t.secret!==o?{code:2,msg:"修改失败，暗号错误！"}:(t.password=n,{code:1,msg:"修改成功！"}):{code:3,msg:"修改失败，用户名不存在！"}},setPwd(e){const{userId:s,rawPassword:n,password:o,rePassword:t}=e;if(o!==t)return{code:2,msg:"两次密码输入不一致，请检查后重新提交！"};const r=this._findUserById(s);return r?r.password!==n?{code:2,msg:"原密码输入错误，请检查后重新提交！"}:r.password===o?{code:2,msg:"原密码和新密码不能一样！"}:(r.password=o,{code:1,msg:"修改成功！"}):{code:2,msg:"用户不存在，非法操作！"}}},persist:!0}),C=[{path:"/",redirect:"/home/index"},{path:"/home",name:"home",component:()=>i(()=>import("./home-51c9d8d6.js"),["./home-51c9d8d6.js","./prompt-803530f7.js","./prompt-7c017c22.css","./TabBar.vue_vue_type_script_setup_true_lang-97f85fd2.js","./vendor-aa74e335.js","./home-f5db376c.css"],import.meta.url),children:[{path:"/home/index",name:"index",component:()=>i(()=>import("./index-6e34bf95.js"),["./index-6e34bf95.js","./shopStore-4648f8f7.js","./vendor-aa74e335.js","./index-90f4d74d.css"],import.meta.url)},{path:"/home/order",name:"order",component:()=>i(()=>import("./order-c36956a7.js"),["./order-c36956a7.js","./orderStore-6d3915d0.js","./vendor-aa74e335.js","./shopStore-4648f8f7.js","./order-5c7a9853.css"],import.meta.url)},{path:"/home/user",name:"user",component:()=>i(()=>import("./user-69372de1.js"),["./user-69372de1.js","./vendor-aa74e335.js","./user-c03e5fd4.css"],import.meta.url)},{path:"/home/classifica",name:"classifica",component:()=>i(()=>import("./classifica-85a4e6b7.js"),["./classifica-85a4e6b7.js","./shopStore-4648f8f7.js","./vendor-aa74e335.js","./classifica-ff31ba1d.css"],import.meta.url)}]},{path:"/commodityDetail",name:"commodityDetail",component:()=>i(()=>import("./commodityDetail-2362f185.js"),["./commodityDetail-2362f185.js","./prompt-803530f7.js","./prompt-7c017c22.css","./orderStore-6d3915d0.js","./vendor-aa74e335.js","./shopStore-4648f8f7.js","./collectionStore-1064c808.js","./commodityDetail-fdef41a8.css"],import.meta.url)},{path:"/billDetail",name:"billDetail",component:()=>i(()=>import("./billDetail-b2630524.js"),["./billDetail-b2630524.js","./shopStore-4648f8f7.js","./vendor-aa74e335.js","./orderStore-6d3915d0.js","./billDetail-964718e4.css"],import.meta.url)},{path:"/comment",name:"comment",component:()=>i(()=>import("./comment-157d09bd.js"),["./comment-157d09bd.js","./shopStore-4648f8f7.js","./vendor-aa74e335.js","./orderStore-6d3915d0.js","./comment-8f38c9a2.css"],import.meta.url)},{path:"/collect",name:"collect",component:()=>i(()=>import("./collect-b89b0b45.js"),["./collect-b89b0b45.js","./shopStore-4648f8f7.js","./vendor-aa74e335.js","./collectionStore-1064c808.js","./collect-4fd8a42f.css"],import.meta.url)},{path:"/setting",name:"setting",component:()=>i(()=>import("./setting-7ef17997.js"),["./setting-7ef17997.js","./vendor-aa74e335.js","./setting-203f84dd.css"],import.meta.url)},{path:"/setPwd",name:"setPwd",component:()=>i(()=>import("./setPwd-302dbb71.js"),["./setPwd-302dbb71.js","./vendor-aa74e335.js","./setPwd-afb791b7.css"],import.meta.url)},{path:"/search",name:"search",component:()=>i(()=>import("./search-d323ec84.js"),["./search-d323ec84.js","./TabBar.vue_vue_type_script_setup_true_lang-97f85fd2.js","./shopStore-4648f8f7.js","./vendor-aa74e335.js","./search-7de4bc37.css"],import.meta.url),meta:{keepAlive:!0}},{path:"/newLogin",name:"Login",component:()=>i(()=>import("./NewLogin-0e6df2e7.js"),["./NewLogin-0e6df2e7.js","./vendor-aa74e335.js","./NewLogin-892d16af.css"],import.meta.url)},{path:"/newRegister",name:"Register",component:()=>i(()=>import("./NewRegister-ce549d72.js"),["./NewRegister-ce549d72.js","./vendor-aa74e335.js","./NewRegister-0ce743d5.css"],import.meta.url)},{path:"/forgetPwd",name:"ForgetPwd",component:()=>i(()=>import("./forgetPwd-203b2896.js"),["./forgetPwd-203b2896.js","./vendor-aa74e335.js","./forgetPwd-b4a94586.css"],import.meta.url)}],d=A({history:D(),routes:C});d.beforeEach(async(e,s)=>N().isLogin||["index","Login","Register","ForgetPwd"].includes(e.name)?!0:(U("您未登录"),setTimeout(()=>{d.push({name:"Login"})},1e3),!1));const g=P();g.use(R({key:e=>`__persisted__${e}`}));const _=v(x);_.use(d);_.use(T);_.use(g);_.mount("#app");O({router:d,DURATION:12e4,callback:()=>{console.log("检测到新版本，请刷新页面")}});export{k as _,N as u};
