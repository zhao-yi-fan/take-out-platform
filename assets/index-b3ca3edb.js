import{d as h,c as g,a as L,r as E}from"./vendor-c46cc583.js";import"vue";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();const I=(e,s)=>{const n=e.__vccOpts||e;for(const[o,t]of s)n[o]=t;return n},v={};function w(e,s){const n=Vue.resolveComponent("router-view");return Vue.openBlock(),Vue.createBlock(n,null,{default:Vue.withCtx(({Component:o})=>[e.$route.meta.keepAlive?(Vue.openBlock(),Vue.createBlock(Vue.KeepAlive,{key:0},[(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(o)))],1024)):(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(o),{key:1}))]),_:1})}const y=I(v,[["render",w]]),P="modulepreload",V=function(e,s){return new URL(e,s).href},d={},i=function(s,n,o){if(!n||n.length===0)return s();const t=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=V(r,o),r in d)return;d[r]=!0;const u=r.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(!!o)for(let c=t.length-1;c>=0;c--){const m=t[c];if(m.href===r&&(!u||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${f}`))return;const a=document.createElement("link");if(a.rel=u?"stylesheet":P,u||(a.as="script",a.crossOrigin=""),a.href=r,document.head.appendChild(a),u)return new Promise((c,m)=>{a.addEventListener("load",c),a.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>s())},R=h("user",{state:()=>({userList:[{userId:1,username:"admin",password:"123456",secret:"111"},{userId:2,username:"zhangsan",password:"123456",secret:""}],loginInfo:null}),getters:{isLogin(){return!!this.loginInfo}},actions:{_findUserByUsername(e){return this.userList.find(s=>s.username===e)},_findUserById(e){return this.userList.find(s=>s.userId===e)},_generateNewUserId(){return this.userList.length===0?1:this.userList[this.userList.length-1].userId+1},setLoginInfo(e){this.loginInfo=e},login(e){const{username:s,password:n}=e,o=this._findUserByUsername(s);return o?o.password!==n?{success:!1,msg:"密码错误"}:(this.loginInfo=o,{success:!0}):{success:!1,msg:"用户不存在"}},register(e){const{username:s,password:n,secret:o}=e;if(this._findUserByUsername(s))return{success:!1,msg:"用户名已存在"};const t=this._generateNewUserId();return this.userList.push({userId:t,username:s,password:n,secret:o}),{success:!0,msg:"注册成功"}},setUserList(e=[]){this.userList=e},forgetPwd(e){const{username:s,password:n,secret:o}=e,t=this._findUserByUsername(s);return t?t.secret!==o?{code:2,msg:"修改失败，暗号错误！"}:(t.password=n,{code:1,msg:"修改成功！"}):{code:3,msg:"修改失败，用户名不存在！"}},setPwd(e){const{userId:s,rawPassword:n,password:o,rePassword:t}=e;if(o!==t)return{code:2,msg:"两次密码输入不一致，请检查后重新提交！"};const r=this._findUserById(s);return r?r.password!==n?{code:2,msg:"原密码输入错误，请检查后重新提交！"}:r.password===o?{code:2,msg:"原密码和新密码不能一样！"}:(r.password=o,{code:1,msg:"修改成功！"}):{code:2,msg:"用户不存在，非法操作！"}}},persist:!0}),O=[{path:"/",redirect:"/home/index"},{path:"/home",name:"home",component:()=>i(()=>import("./home-545ad9af.js"),["./home-545ad9af.js","./prompt-b9018823.js","./prompt-7c017c22.css","./TabBar.vue_vue_type_script_setup_true_lang-08c42118.js","./vendor-c46cc583.js","./home-f5db376c.css"],import.meta.url),children:[{path:"/home/index",name:"index",component:()=>i(()=>import("./index-f9fd124b.js"),["./index-f9fd124b.js","./shopStore-1a87daf4.js","./vendor-c46cc583.js","./index-90f4d74d.css"],import.meta.url)},{path:"/home/order",name:"order",component:()=>i(()=>import("./order-7b10cc86.js"),["./order-7b10cc86.js","./orderStore-469b8802.js","./vendor-c46cc583.js","./shopStore-1a87daf4.js","./order-5c7a9853.css"],import.meta.url)},{path:"/home/user",name:"user",component:()=>i(()=>import("./user-5c3b6250.js"),["./user-5c3b6250.js","./vendor-c46cc583.js","./user-c03e5fd4.css"],import.meta.url)},{path:"/home/classifica",name:"classifica",component:()=>i(()=>import("./classifica-3a850727.js"),["./classifica-3a850727.js","./shopStore-1a87daf4.js","./vendor-c46cc583.js","./classifica-ff31ba1d.css"],import.meta.url)}]},{path:"/commodityDetail",name:"commodityDetail",component:()=>i(()=>import("./commodityDetail-f4233983.js"),["./commodityDetail-f4233983.js","./prompt-b9018823.js","./prompt-7c017c22.css","./orderStore-469b8802.js","./vendor-c46cc583.js","./shopStore-1a87daf4.js","./collectionStore-3ceb9eb7.js","./commodityDetail-fdef41a8.css"],import.meta.url)},{path:"/billDetail",name:"billDetail",component:()=>i(()=>import("./billDetail-d670b22d.js"),["./billDetail-d670b22d.js","./shopStore-1a87daf4.js","./vendor-c46cc583.js","./orderStore-469b8802.js","./billDetail-964718e4.css"],import.meta.url)},{path:"/comment",name:"comment",component:()=>i(()=>import("./comment-dd29517b.js"),["./comment-dd29517b.js","./shopStore-1a87daf4.js","./vendor-c46cc583.js","./orderStore-469b8802.js","./comment-8f38c9a2.css"],import.meta.url)},{path:"/collect",name:"collect",component:()=>i(()=>import("./collect-835f9862.js"),["./collect-835f9862.js","./shopStore-1a87daf4.js","./vendor-c46cc583.js","./collectionStore-3ceb9eb7.js","./collect-4fd8a42f.css"],import.meta.url)},{path:"/setting",name:"setting",component:()=>i(()=>import("./setting-5a8bc8bb.js"),["./setting-5a8bc8bb.js","./vendor-c46cc583.js","./setting-203f84dd.css"],import.meta.url)},{path:"/setPwd",name:"setPwd",component:()=>i(()=>import("./setPwd-e8d22eeb.js"),["./setPwd-e8d22eeb.js","./vendor-c46cc583.js","./setPwd-afb791b7.css"],import.meta.url)},{path:"/search",name:"search",component:()=>i(()=>import("./search-1d2913e2.js"),["./search-1d2913e2.js","./TabBar.vue_vue_type_script_setup_true_lang-08c42118.js","./shopStore-1a87daf4.js","./vendor-c46cc583.js","./search-7de4bc37.css"],import.meta.url),meta:{keepAlive:!0}},{path:"/newLogin",name:"Login",component:()=>i(()=>import("./NewLogin-1c2de168.js"),["./NewLogin-1c2de168.js","./vendor-c46cc583.js","./NewLogin-892d16af.css"],import.meta.url)},{path:"/newRegister",name:"Register",component:()=>i(()=>import("./NewRegister-a65c0a58.js"),["./NewRegister-a65c0a58.js","./vendor-c46cc583.js","./NewRegister-0ce743d5.css"],import.meta.url)},{path:"/forgetPwd",name:"ForgetPwd",component:()=>i(()=>import("./forgetPwd-4d9f2eb9.js"),["./forgetPwd-4d9f2eb9.js","./vendor-c46cc583.js","./forgetPwd-b4a94586.css"],import.meta.url)}],l=VueRouter.createRouter({history:VueRouter.createWebHashHistory(),routes:O});l.beforeEach(async(e,s)=>R().isLogin||["index","Login","Register","ForgetPwd"].includes(e.name)?!0:(vant.showToast("您未登录"),setTimeout(()=>{l.push({name:"Login"})},1e3),!1));const _=g();_.use(L({key:e=>`__persisted__${e}`}));const p=Vue.createApp(y);p.use(l);p.use(vant);p.use(_);p.mount("#app");E({router:l,DURATION:12e4,callback:()=>{console.log("检测到新版本，请刷新页面")}});export{I as _,R as u};
