import{defineComponent as v,reactive as w,resolveComponent as n,openBlock as V,createElementBlock as b,Fragment as y,createVNode as t,createElementVNode as l,withCtx as d,createTextVNode as x}from"vue";import{showLoadingToast as N,closeToast as T,showSuccessToast as k,showFailToast as C}from"vant";import{u as S}from"./vendor-3fe38f6b.js";import{u as U,_ as h}from"./index-1be59287.js";const q={class:"set-login"},A={class:"set-login-cont"},R={style:{margin:"16px"}},L=v({__name:"NewRegister",setup(B){const m=U(),u=S(),o=w({username:"",password:"",secret:"",passwordAgain:""}),i=()=>{u.go(-1)},p=async a=>{let e=await m.register(a);N({message:"注册中...",forbidClick:!0}),setTimeout(()=>{T(),e?(k("注册成功，请登录"),u.push({path:"/newLogin"})):C("用户名已存在，请修改后重新提交！")},1e3)},c=a=>a==o.password;return(a,e)=>{const _=n("van-nav-bar"),r=n("van-field"),f=n("van-button"),g=n("van-form");return V(),b(y,null,[t(_,{title:"注册","left-text":"返回","left-arrow":"",onClickLeft:i}),l("div",q,[l("div",A,[t(g,{onSubmit:p},{default:d(()=>[t(r,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=s=>o.username=s),name:"username",label:"账号",placeholder:"账号",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),t(r,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=s=>o.password=s),type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),l("div",null,[t(r,{modelValue:o.passwordAgain,"onUpdate:modelValue":e[2]||(e[2]=s=>o.passwordAgain=s),type:"password",name:"passwordAgain",label:"密码确认",placeholder:"再次输入密码",rules:[{required:!0,message:"请确认密码"},{validator:c,message:"请输入正确密码"}]},null,8,["modelValue","rules"]),t(r,{modelValue:o.secret,"onUpdate:modelValue":e[3]||(e[3]=s=>o.secret=s),type:"secret",name:"secret",label:"暗号",placeholder:"请输入暗号",rules:[{required:!0,message:"请填写暗号"}]},null,8,["modelValue"])]),l("div",R,[t(f,{round:"",block:"",type:"info","native-type":"submit"},{default:d(()=>[...e[4]||(e[4]=[x("注册",-1)])]),_:1})])]),_:1})])])],64)}}});const z=h(L,[["__scopeId","data-v-773500fb"]]);export{z as default};
