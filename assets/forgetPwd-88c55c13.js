import{defineComponent as w,reactive as v,resolveComponent as n,openBlock as V,createElementBlock as b,Fragment as y,createVNode as s,createElementVNode as l,withCtx as u,createTextVNode as x}from"vue";import{showLoadingToast as T,closeToast as k,showSuccessToast as C,showFailToast as U}from"vant";import{useRouter as h}from"vue-router";import{u as q,_ as A}from"./index-b203593a.js";import"./vendor-45a12d90.js";import"@vue/devtools-api";const P={class:"set-login"},S={class:"set-login-cont"},L={style:{margin:"16px"}},N=w({__name:"forgetPwd",setup(B){const m=q(),d=h(),o=v({username:"",password:"",passwordAgain:"",secret:""}),p=()=>{d.go(-1)},i=async r=>{const e=await m.forgetPwd(r);T({message:"修改密码中...",forbidClick:!0}),setTimeout(()=>{k(),e.code==1?(C("修改成功，请登录"),d.push({path:"/newLogin"})):U(e.msg)},1e3)},c=r=>r==o.password;return(r,e)=>{const _=n("van-nav-bar"),a=n("van-field"),f=n("van-button"),g=n("van-form");return V(),b(y,null,[s(_,{title:"忘记密码","left-text":"返回","left-arrow":"",onClickLeft:p}),l("div",P,[l("div",S,[s(g,{onSubmit:i},{default:u(()=>[s(a,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=t=>o.username=t),name:"username",label:"账号",placeholder:"请输入账号",rules:[{required:!0,message:"请填写账号"}]},null,8,["modelValue"]),s(a,{modelValue:o.secret,"onUpdate:modelValue":e[1]||(e[1]=t=>o.secret=t),type:"secret",name:"secret",label:"暗号",placeholder:"请输入暗号",rules:[{required:!0,message:"请填写暗号"}]},null,8,["modelValue"]),s(a,{modelValue:o.password,"onUpdate:modelValue":e[2]||(e[2]=t=>o.password=t),type:"password",name:"password",label:"新密码",placeholder:"请输入新密码",rules:[{required:!0,message:"请填写新密码"}]},null,8,["modelValue"]),s(a,{modelValue:o.passwordAgain,"onUpdate:modelValue":e[3]||(e[3]=t=>o.passwordAgain=t),type:"password",name:"passwordAgain",label:"新密码确认",placeholder:"再次输入新密码",rules:[{required:!0,message:"请确认新密码"},{validator:c,message:"请输入正确新密码"}]},null,8,["modelValue","rules"]),l("div",L,[s(f,{round:"",block:"",type:"info","native-type":"submit"},{default:u(()=>[...e[4]||(e[4]=[x("提交",-1)])]),_:1})])]),_:1})])])],64)}}});const z=A(N,[["__scopeId","data-v-20f5d91d"]]);export{z as default};
