import{_ as L,q,u as w,b as m,m as N,r as l,o as i,c as b,f as o,a as n,t as f,F as T,i as U,x as r,y as A,z as C,h as F,p as O,k as D}from"./index-efe56b65.js";import{u as E}from"./shopStore-5c9586bc.js";import{u as R}from"./orderStore-d4e1ed49.js";const v=d=>(O("data-v-bcd646b6"),d=d(),D(),d),z={class:"top-bill"},G={class:"top-bill-return"},H=v(()=>o("div",{class:"top-bill-title"}," 外卖配送 ",-1)),M={class:"top-bill-address"},j=v(()=>o("p",null,[o("span",null,"立即送出"),o("span",{class:"r"},"大概15分钟后抵达")],-1)),J={class:"top-bill-shopList"},K={__name:"Bill",setup(d){const h=E(),c=R(),I=q(),_=w(),y=m(h.baseAddress.name),u=m({foodList:[]}),e=N({address:"",people:"",phone:"",businessesId:""}),S=async()=>{if(e.address)if(e.people){if(!e.phone)return r("请填写联系方式")}else return r("请填写收货人");else return r("请填写收货地址");let a=await c.setOrderStatus({address:e.baseAddress+"--"+e.address,businessesId:e.businessesId,people:e.people,phone:e.phone});A({message:"正在支付请稍候...",forbidClick:!0}),setTimeout(()=>{C(),a?(r("支付成功"),_.push("/Home/Index")):r("支付失败")},2e3)},V=()=>{_.go(-1)};return(()=>{e.businessesId=I.query.businessesId,c.orderList.forEach((a,t)=>{a.businessesId==e.businessesId&&a.status=="apply"&&(u.value=a)})})(),(a,t)=>{const g=l("van-icon"),x=l("van-notice-bar"),p=l("van-field"),k=l("van-card"),B=l("van-submit-bar");return i(),b("div",z,[o("div",G,[n(g,{name:"arrow-left",onClick:V})]),n(x,{scrollable:"",text:"为减少接触，降低风险，请注意与外卖人员的安全距离。"}),H,o("div",M,[o("p",null,f(y.value),1),n(p,{modelValue:e.address,"onUpdate:modelValue":t[0]||(t[0]=s=>e.address=s),name:"address",label:"详细地址",placeholder:"详细地址",rules:[{required:!0,message:"请填写详细地址"}]},null,8,["modelValue"]),n(p,{modelValue:e.people,"onUpdate:modelValue":t[1]||(t[1]=s=>e.people=s),label:"收货人",name:"people",placeholder:"收货人",rules:[{required:!0,message:"请填写收货人"}]},null,8,["modelValue"]),n(p,{modelValue:e.phone,"onUpdate:modelValue":t[2]||(t[2]=s=>e.phone=s),name:"phone",type:"tel",label:"联系方式",placeholder:"联系方式",rules:[{required:!0,message:"请填写联系方式"}]},null,8,["modelValue"]),j]),o("div",J,[o("p",null,f(),1),(i(!0),b(T,null,U(u.value.foodList,s=>(i(),F(k,{num:s.foodNum,price:s.foodMoney,desc:s.commodityDescribe,title:s.foodName,thumb:s.foodImageUrl,key:s.foodId},null,8,["num","price","desc","title","thumb"]))),128))]),n(B,{price:u.value.money*100,"button-text":"确认支付",onSubmit:S},null,8,["price"])])}}},Y=L(K,[["__scopeId","data-v-bcd646b6"]]);export{Y as default};
