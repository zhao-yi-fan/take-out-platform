import{_ as w,b as g,n as y,u as V,e as S,d as k,g as O,t as B,r as i,o as b,c as v,h as n,a,i as h,F as L,k as q,T as l,j as A,p as C,m as N}from"./index-ff975386.js";const U={name:"",components:{},setup(s,{root:t}){const d=g(),c=y(),p=V(),_=S(0),e=k({baseAddress:d.state.baseAddress.name,address:"",people:"",phone:"",businessesId:"",currentOrderInfo:null}),m=async()=>{if(e.address)if(e.people){if(!e.phone)return l.fail("请填写联系方式")}else return l.fail("请填写收货人");else return l.fail("请填写收货地址");let r=await d.dispatch("setOrderStatus",{address:e.baseAddress+"--"+e.address,businessesId:e.businessesId,people:e.people,phone:e.phone});l.loading({message:"正在支付请稍候...",forbidClick:!0}),setTimeout(()=>{l.clear(),r?(l.success("支付成功"),p.push("/Home/Index")):l.fail("支付失败")},2e3)},u=()=>{p.go(-1)};return(()=>{console.log(d.state.orderList,"store.state.orderList===="),e.businessesId=c.query.businessesId,d.state.orderList.forEach((r,o)=>{r.businessesId==e.businessesId&&r.status=="apply"&&(e.currentOrderInfo=r)}),console.log(e.currentOrderInfo,"model.currentOrderInfo===")})(),O(()=>{}),{...B(e),active:_,onSubmit:m,returnGo:u}}},I=s=>(C("data-v-b0c51843"),s=s(),N(),s),R={class:"wsw-top-bill"},T={class:"wsw-top-bill-return"},D=I(()=>n("div",{class:"wsw-top-bill-title"}," 外卖配送 ",-1)),E={class:"wsw-top-bill-address"},F=I(()=>n("p",null,[n("span",null,"立即送出"),n("span",{class:"wsw-r"},"大概15分钟后抵达")],-1)),G={class:"wsw-top-bill-shopList"};function M(s,t,d,c,p,_){const e=i("van-icon"),m=i("van-notice-bar"),u=i("van-field"),f=i("van-card"),r=i("van-submit-bar");return b(),v("div",R,[n("div",T,[a(e,{name:"arrow-left",onClick:c.returnGo},null,8,["onClick"])]),a(m,{scrollable:"",text:"为减少接触，降低风险，请注意与外卖人员的安全距离。"}),D,n("div",E,[n("p",null,h(s.baseAddress),1),a(u,{modelValue:s.address,"onUpdate:modelValue":t[0]||(t[0]=o=>s.address=o),name:"address",label:"详细地址",placeholder:"详细地址",rules:[{required:!0,message:"请填写详细地址"}]},null,8,["modelValue"]),a(u,{modelValue:s.people,"onUpdate:modelValue":t[1]||(t[1]=o=>s.people=o),label:"收货人",name:"people",placeholder:"收货人",rules:[{required:!0,message:"请填写收货人"}]},null,8,["modelValue"]),a(u,{modelValue:s.phone,"onUpdate:modelValue":t[2]||(t[2]=o=>s.phone=o),name:"phone",type:"tel",label:"联系方式",placeholder:"联系方式",rules:[{required:!0,message:"请填写联系方式"}]},null,8,["modelValue"]),F]),n("div",G,[n("p",null,h(),1),(b(!0),v(L,null,q(s.currentOrderInfo.foodList,o=>(b(),A(f,{num:o.foodNum,price:o.foodMoney,desc:o.commodityDescribe,title:o.foodName,thumb:o.foodImageUrl,key:o.foodId},null,8,["num","price","desc","title","thumb"]))),128))]),a(r,{price:s.currentOrderInfo.money*100,"button-text":"确认支付",onSubmit:c.onSubmit},null,8,["price","onSubmit"])])}const j=w(U,[["render",M],["__scopeId","data-v-b0c51843"]]);export{j as default};
