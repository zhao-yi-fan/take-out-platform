import{r as w}from"./vendor-7ce8fbae.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();const P=(e,r)=>{const n=e.__vccOpts||e;for(const[o,t]of r)n[o]=t;return n},R={};function V(e,r){const n=Vue.resolveComponent("router-view");return Vue.openBlock(),Vue.createBlock(n,null,{default:Vue.withCtx(({Component:o})=>[e.$route.meta.keepAlive?(Vue.openBlock(),Vue.createBlock(Vue.KeepAlive,{key:0},[(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(o)))],1024)):(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(o),{key:1}))]),_:1})}const A=P(R,[["render",V]]);function O(e){return typeof e=="object"&&e!==null}function h(e,r){return e=O(e)?e:Object.create(null),new Proxy(e,{get(n,o,t){return o==="key"?Reflect.get(n,o,t):Reflect.get(n,o,t)||Reflect.get(r,o,t)}})}function D(e,r){return r.reduce((n,o)=>n==null?void 0:n[o],e)}function T(e,r,n){return r.slice(0,-1).reduce((o,t)=>/^(__proto__)$/.test(t)?{}:o[t]=o[t]||{},e)[r[r.length-1]]=n,e}function U(e,r){return r.reduce((n,o)=>{const t=o.split(".");return T(n,t,D(e,t))},{})}function g(e,{storage:r,serializer:n,key:o,debug:t}){try{const s=r==null?void 0:r.getItem(o);s&&e.$patch(n==null?void 0:n.deserialize(s))}catch(s){t&&console.error(s)}}function y(e,{storage:r,serializer:n,key:o,paths:t,debug:s}){try{const i=Array.isArray(t)?U(e,t):e;r.setItem(o,n.serialize(i))}catch(i){s&&console.error(i)}}function B(e={}){return r=>{const{auto:n=!1}=e,{options:{persist:o=n},store:t}=r;if(!o)return;const s=(Array.isArray(o)?o.map(i=>h(i,e)):[h(o,e)]).map(({storage:i=localStorage,beforeRestore:a=null,afterRestore:m=null,serializer:c={serialize:JSON.stringify,deserialize:JSON.parse},key:l=t.$id,paths:d=null,debug:E=!1})=>{var f;return{storage:i,beforeRestore:a,afterRestore:m,serializer:c,key:((f=e.key)!=null?f:I=>I)(l),paths:d,debug:E}});t.$persist=()=>{s.forEach(i=>{y(t.$state,i)})},t.$hydrate=({runHooks:i=!0}={})=>{s.forEach(a=>{const{beforeRestore:m,afterRestore:c}=a;i&&(m==null||m(r)),g(t,a),i&&(c==null||c(r))})},s.forEach(i=>{const{beforeRestore:a,afterRestore:m}=i;a==null||a(r),g(t,i),m==null||m(r),t.$subscribe((c,l)=>{y(l,i)},{detached:!0})})}}const S="modulepreload",k=function(e,r){return new URL(e,r).href},L={},u=function(r,n,o){if(!n||n.length===0)return r();const t=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=k(s,o),s in L)return;L[s]=!0;const i=s.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(!!o)for(let l=t.length-1;l>=0;l--){const d=t[l];if(d.href===s&&(!i||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=i?"stylesheet":S,i||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),i)return new Promise((l,d)=>{c.addEventListener("load",l),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>r())},b=Pinia.defineStore("user",{state:()=>({userList:[{userId:1,username:"admin",password:"123456",secret:"111"},{userId:2,username:"zhangsan",password:"123456",secret:""}],loginInfo:null}),getters:{isLogin(){return!!this.loginInfo}},actions:{_findUserByUsername(e){return this.userList.find(r=>r.username===e)},_findUserById(e){return this.userList.find(r=>r.userId===e)},_generateNewUserId(){return this.userList.length===0?1:this.userList[this.userList.length-1].userId+1},setLoginInfo(e){this.loginInfo=e},login(e){const{username:r,password:n}=e,o=this._findUserByUsername(r);return o?o.password!==n?{success:!1,msg:"密码错误"}:(this.loginInfo=o,{success:!0}):{success:!1,msg:"用户不存在"}},register(e){const{username:r,password:n,secret:o}=e;if(this._findUserByUsername(r))return{success:!1,msg:"用户名已存在"};const t=this._generateNewUserId();return this.userList.push({userId:t,username:r,password:n,secret:o}),{success:!0,msg:"注册成功"}},setUserList(e=[]){this.userList=e},forgetPwd(e){const{username:r,password:n,secret:o}=e,t=this._findUserByUsername(r);return t?t.secret!==o?{code:2,msg:"修改失败，暗号错误！"}:(t.password=n,{code:1,msg:"修改成功！"}):{code:3,msg:"修改失败，用户名不存在！"}},setPwd(e){const{userId:r,rawPassword:n,password:o,rePassword:t}=e;if(o!==t)return{code:2,msg:"两次密码输入不一致，请检查后重新提交！"};const s=this._findUserById(r);return s?s.password!==n?{code:2,msg:"原密码输入错误，请检查后重新提交！"}:s.password===o?{code:2,msg:"原密码和新密码不能一样！"}:(s.password=o,{code:1,msg:"修改成功！"}):{code:2,msg:"用户不存在，非法操作！"}}},persist:!0}),$=[{path:"/",redirect:"/home/index"},{path:"/home",name:"home",component:()=>u(()=>import("./home-40a6f6d6.js"),["./home-40a6f6d6.js","./prompt-336bfa5a.js","./prompt-7c017c22.css","./TabBar.vue_vue_type_script_setup_true_lang-4d08f56a.js","./vendor-7ce8fbae.js","./home-f5db376c.css"],import.meta.url),children:[{path:"/home/index",name:"index",component:()=>u(()=>import("./index-cf553bd5.js"),["./index-cf553bd5.js","./shopStore-5e5560f7.js","./vendor-7ce8fbae.js","./index-90f4d74d.css"],import.meta.url)},{path:"/home/order",name:"order",component:()=>u(()=>import("./order-bd5d830e.js"),["./order-bd5d830e.js","./orderStore-31f301f2.js","./shopStore-5e5560f7.js","./vendor-7ce8fbae.js","./order-5c7a9853.css"],import.meta.url)},{path:"/home/user",name:"user",component:()=>u(()=>import("./user-ecf24054.js"),["./user-ecf24054.js","./vendor-7ce8fbae.js","./user-c03e5fd4.css"],import.meta.url)},{path:"/home/classifica",name:"classifica",component:()=>u(()=>import("./classifica-de94c228.js"),["./classifica-de94c228.js","./shopStore-5e5560f7.js","./vendor-7ce8fbae.js","./classifica-ff31ba1d.css"],import.meta.url)}]},{path:"/commodityDetail",name:"commodityDetail",component:()=>u(()=>import("./commodityDetail-ba74c649.js"),["./commodityDetail-ba74c649.js","./prompt-336bfa5a.js","./prompt-7c017c22.css","./orderStore-31f301f2.js","./shopStore-5e5560f7.js","./vendor-7ce8fbae.js","./collectionStore-5ed64b74.js","./commodityDetail-fdef41a8.css"],import.meta.url)},{path:"/billDetail",name:"billDetail",component:()=>u(()=>import("./billDetail-ebe1484f.js"),["./billDetail-ebe1484f.js","./shopStore-5e5560f7.js","./orderStore-31f301f2.js","./vendor-7ce8fbae.js","./billDetail-964718e4.css"],import.meta.url)},{path:"/comment",name:"comment",component:()=>u(()=>import("./comment-d9512170.js"),["./comment-d9512170.js","./shopStore-5e5560f7.js","./orderStore-31f301f2.js","./vendor-7ce8fbae.js","./comment-8f38c9a2.css"],import.meta.url)},{path:"/collect",name:"collect",component:()=>u(()=>import("./collect-8a015815.js"),["./collect-8a015815.js","./shopStore-5e5560f7.js","./collectionStore-5ed64b74.js","./vendor-7ce8fbae.js","./collect-4fd8a42f.css"],import.meta.url)},{path:"/setting",name:"setting",component:()=>u(()=>import("./setting-aa689fe4.js"),["./setting-aa689fe4.js","./vendor-7ce8fbae.js","./setting-203f84dd.css"],import.meta.url)},{path:"/setPwd",name:"setPwd",component:()=>u(()=>import("./setPwd-fe44352a.js"),["./setPwd-fe44352a.js","./vendor-7ce8fbae.js","./setPwd-afb791b7.css"],import.meta.url)},{path:"/search",name:"search",component:()=>u(()=>import("./search-cfc7a7ce.js"),["./search-cfc7a7ce.js","./TabBar.vue_vue_type_script_setup_true_lang-4d08f56a.js","./shopStore-5e5560f7.js","./vendor-7ce8fbae.js","./search-7de4bc37.css"],import.meta.url),meta:{keepAlive:!0}},{path:"/newLogin",name:"Login",component:()=>u(()=>import("./NewLogin-6c087471.js"),["./NewLogin-6c087471.js","./vendor-7ce8fbae.js","./NewLogin-892d16af.css"],import.meta.url)},{path:"/newRegister",name:"Register",component:()=>u(()=>import("./NewRegister-bd0b3f9e.js"),["./NewRegister-bd0b3f9e.js","./vendor-7ce8fbae.js","./NewRegister-0ce743d5.css"],import.meta.url)},{path:"/forgetPwd",name:"ForgetPwd",component:()=>u(()=>import("./forgetPwd-4b849344.js"),["./forgetPwd-4b849344.js","./vendor-7ce8fbae.js","./forgetPwd-b4a94586.css"],import.meta.url)}],p=VueRouter.createRouter({history:VueRouter.createWebHashHistory(),routes:$});p.beforeEach(async(e,r)=>b().isLogin||["index","Login","Register","ForgetPwd"].includes(e.name)?!0:(vant.showToast("您未登录"),setTimeout(()=>{p.push({name:"Login"})},1e3),!1));const v=Pinia.createPinia();v.use(B({key:e=>`__persisted__${e}`}));const _=Vue.createApp(A);_.use(p);_.use(vant);_.use(v);_.mount("#app");w({router:p,DURATION:12e4,callback:()=>{console.log("检测到新版本，请刷新页面")}});export{P as _,b as u};
