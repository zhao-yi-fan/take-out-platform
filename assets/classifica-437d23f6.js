import{defineComponent as N,ref as c,computed as I,onMounted as B,resolveComponent as r,openBlock as u,createElementBlock as v,createVNode as d,unref as T,withCtx as j,createElementVNode as n,createBlock as q,createCommentVNode as D,Fragment as E,renderList as J,toDisplayString as p}from"vue";import{h as O,u as R}from"./vendor-07b48c72.js";import{u as U}from"./shopStore-2f5b3dd3.js";import{_ as $}from"./index-5e5382fe.js";const A={class:"classification"},F={class:"classification-list"},M=["onClick"],z=["src"],G={class:"flex flex-1 flex-col justify-between"},H={class:"flex items-center justify-between"},K={class:"font-bold"},P={class:"text-xs text-red-500 font-bold"},Q={class:"mt-1 flex flex-wrap gap-4 text-xs text-gray-600"},W=N({name:"classification",__name:"classifica",setup(X){const _=U(),y=O(),m=R(),x=c(_.baseAddress.code),i=c([]),l=c(0),f=c(0),C=I(()=>{var t;return(t=h.find(e=>e.value==l.value))==null?void 0:t.text});B(()=>{g(y.query.classificationId)});const h=[{text:"全部",value:0},{text:"美食",value:1},{text:"饮品",value:2},{text:"甜品",value:3},{text:"鲜花",value:4},{text:"下午茶",value:5},{text:"超市",value:6},{text:"药品",value:7},{text:"买菜",value:8}],w=[{text:"默认排序",value:0},{text:"好评排序",value:1},{text:"起送费排序",value:2}],b=t=>{m.push({path:"/Commodity_details",query:{shopsId:t}})},g=t=>{console.log(typeof t,"分类"),f.value=0,i.value=(_.shopsList||[]).filter((e,s)=>e.addressCode==x.value&&e.classificationType==t)},V=t=>{console.log(t,"排序");let e=JSON.parse(JSON.stringify(_.shopsList));e=e.filter((s,a)=>s.addressCode==x.value),l.value&&(e=e.filter((s,a)=>s.classificationType==l.value)),t==1?(console.log(e,"shopsList1==="),e.sort((s,a)=>a.score-s.score)):t==2&&e.sort((s,a)=>s.freight-a.freight),i.value=e};return(t,e)=>{const s=r("van-nav-bar"),a=r("van-dropdown-item"),k=r("van-dropdown-menu"),S=r("van-empty");return u(),v("div",A,[d(s,{title:C.value,"left-text":"返回","left-arrow":"",onClickLeft:e[0]||(e[0]=o=>T(m).go(-1))},null,8,["title"]),d(k,null,{default:j(()=>[d(a,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value=o),options:h,onChange:g},null,8,["modelValue"]),d(a,{modelValue:f.value,"onUpdate:modelValue":e[2]||(e[2]=o=>f.value=o),options:w,onChange:V},null,8,["modelValue"])]),_:1}),n("div",F,[i.value.length==0?(u(),q(S,{key:0,description:"暂无商铺"})):D("",!0),(u(!0),v(E,null,J(i.value,(o,L)=>(u(),v("div",{key:L,class:"classification-list-item flex gap-4",onClick:Y=>b(o.shopsId)},[n("img",{src:o.shopsImage,alt:"",srcset:"",class:"w-1/3 min-h-[80px] rounded-[10px]"},null,8,z),n("div",G,[n("p",H,[n("span",K,p(o.shopsName),1),n("span",P,p(o.score),1)]),n("p",Q,[n("span",null,"起送："+p(o.shopsStart),1),n("span",null,"运费："+p(o.freight),1)])])],8,M))),128))])])}}});const se=$(W,[["__scopeId","data-v-cba1a0aa"]]);export{se as default};
