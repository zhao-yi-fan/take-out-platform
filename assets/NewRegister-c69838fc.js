import{showLoadingToast as w,closeToast as v,showSuccessToast as V,showFailToast as b}from"vant";import{useRouter as y}from"vue-router";import{d as x,k,l as N,r as l,o as T,c as h,a as t,g as n,w as u,h as C,F as S,_ as U}from"./index-7a5bb6f9.js";const q={class:"set-login"},A={class:"set-login-cont"},R={style:{margin:"16px"}},B=x({__name:"NewRegister",setup(F){const i=k(),d=y(),s=N({username:"",password:"",secret:"",passwordAgain:""}),m=()=>{d.go(-1)},p=async a=>{let e=await i.register(a);w({message:"注册中...",forbidClick:!0}),setTimeout(()=>{v(),e?(V("注册成功，请登录"),d.push({path:"/newLogin"})):b("用户名已存在，请修改后重新提交！")},1e3)},c=a=>a==s.password;return(a,e)=>{const _=l("van-nav-bar"),r=l("van-field"),g=l("van-button"),f=l("van-form");return T(),h(S,null,[t(_,{title:"注册","left-text":"返回","left-arrow":"",onClickLeft:m}),n("div",q,[n("div",A,[t(f,{onSubmit:p},{default:u(()=>[t(r,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=o=>s.username=o),name:"username",label:"账号",placeholder:"账号",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),t(r,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=o=>s.password=o),type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),n("div",null,[t(r,{modelValue:s.passwordAgain,"onUpdate:modelValue":e[2]||(e[2]=o=>s.passwordAgain=o),type:"password",name:"passwordAgain",label:"密码确认",placeholder:"再次输入密码",rules:[{required:!0,message:"请确认密码"},{validator:c,message:"请输入正确密码"}]},null,8,["modelValue","rules"]),t(r,{modelValue:s.secret,"onUpdate:modelValue":e[3]||(e[3]=o=>s.secret=o),type:"secret",name:"secret",label:"暗号",placeholder:"请输入暗号",rules:[{required:!0,message:"请填写暗号"}]},null,8,["modelValue"])]),n("div",R,[t(g,{round:"",block:"",type:"info","native-type":"submit"},{default:u(()=>[...e[4]||(e[4]=[C("注册",-1)])]),_:1})])]),_:1})])])],64)}}});const j=U(B,[["__scopeId","data-v-773500fb"]]);export{j as default};
