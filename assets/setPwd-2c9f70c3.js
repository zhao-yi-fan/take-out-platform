import{defineComponent as f,reactive as v,resolveComponent as n,openBlock as P,createElementBlock as b,Fragment as g,createVNode as s,createElementVNode as p,withCtx as c,createTextVNode as V}from"vue";import{u as x,j as y,k,l as T,i as h}from"./vendor-07b48c72.js";import{u as C,_ as I}from"./index-e2b79e34.js";const S={class:"set-pwd"},U={class:"set-pwd-cont"},q={style:{margin:"16px"}},F=f({__name:"setPwd",setup(L){const l=C(),i=x(),o=v({rawPassword:"",password:"",rePassword:""}),w=()=>{i.go(-1)},_=async d=>{console.log("submit",d);const{rawPassword:e,password:u,rePassword:t}=d,m={userId:l.loginInfo.userId,rawPassword:e,password:u,rePassword:t},r=await l.setPwd(m);y({message:"正在修改密码请稍候...",forbidClick:!0}),setTimeout(()=>{k(),r.code==1?(T("修改密码成功，请您重新登录"),l.setLoginInfo(null),i.push("/home/user")):h(r.msg)},2e3)};return(d,e)=>{const u=n("van-nav-bar"),t=n("van-field"),m=n("van-button"),r=n("van-form");return P(),b(g,null,[s(u,{title:"修改密码","left-text":"返回","left-arrow":"",onClickLeft:w}),p("div",S,[p("div",U,[s(r,{onSubmit:_},{default:c(()=>[s(t,{modelValue:o.rawPassword,"onUpdate:modelValue":e[0]||(e[0]=a=>o.rawPassword=a),name:"rawPassword",label:"原密码",placeholder:"原密码",rules:[{required:!0,message:"请填写原密码"}]},null,8,["modelValue"]),s(t,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=a=>o.password=a),type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),s(t,{modelValue:o.rePassword,"onUpdate:modelValue":e[2]||(e[2]=a=>o.rePassword=a),type:"password",name:"rePassword",label:"重新输入密码",placeholder:"重新输入密码",rules:[{required:!0,message:"请再次填写密码"}]},null,8,["modelValue"]),p("div",q,[s(m,{round:"",block:"",type:"info","native-type":"submit"},{default:c(()=>[...e[3]||(e[3]=[V("提交",-1)])]),_:1})])]),_:1})])])],64)}}});const E=I(F,[["__scopeId","data-v-437e8e69"]]);export{E as default};
