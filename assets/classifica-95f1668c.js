import{d as N,p as B,b as I,e as c,f as j,g as T,r,o as u,c as f,a as d,u as q,w as D,h as a,j as F,n as J,F as O,k as R,t as p,_ as U}from"./index-520b68e5.js";import{u as $}from"./shopStore-9dd97cf3.js";const A={class:"classification"},E={class:"classification-list"},M=["onClick"],z=["src"],G={class:"flex flex-1 flex-col justify-between"},H={class:"flex items-center justify-between"},K={class:"font-bold"},P={class:"text-xs text-red-500 font-bold"},Q={class:"mt-1 flex flex-wrap gap-4 text-xs text-gray-600"},W=N({name:"classification",__name:"classifica",setup(X){const _=$(),y=B(),x=I(),m=c(_.baseAddress.code),i=c([]),l=c(0),v=c(0),C=j(()=>{var t;return(t=h.find(e=>e.value==l.value))==null?void 0:t.text});T(()=>{g(y.query.classificationId)});const h=[{text:"全部",value:0},{text:"美食",value:1},{text:"饮品",value:2},{text:"甜品",value:3},{text:"鲜花",value:4},{text:"下午茶",value:5},{text:"超市",value:6},{text:"药品",value:7},{text:"买菜",value:8}],w=[{text:"默认排序",value:0},{text:"好评排序",value:1},{text:"起送费排序",value:2}],b=t=>{x.push({path:"/Commodity_details",query:{shopsId:t}})},g=t=>{console.log(typeof t,"分类"),v.value=0,i.value=(_.shopsList||[]).filter((e,o)=>e.addressCode==m.value&&e.classificationType==t)},k=t=>{console.log(t,"排序");let e=JSON.parse(JSON.stringify(_.shopsList));e=e.filter((o,n)=>o.addressCode==m.value),l.value&&(e=e.filter((o,n)=>o.classificationType==l.value)),t==1?(console.log(e,"shopsList1==="),e.sort((o,n)=>n.score-o.score)):t==2&&e.sort((o,n)=>o.freight-n.freight),i.value=e};return(t,e)=>{const o=r("van-nav-bar"),n=r("van-dropdown-item"),V=r("van-dropdown-menu"),S=r("van-empty");return u(),f("div",A,[d(o,{title:C.value,"left-text":"返回","left-arrow":"",onClickLeft:e[0]||(e[0]=s=>q(x).go(-1))},null,8,["title"]),d(V,null,{default:D(()=>[d(n,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value=s),options:h,onChange:g},null,8,["modelValue"]),d(n,{modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=s=>v.value=s),options:w,onChange:k},null,8,["modelValue"])]),_:1}),a("div",E,[i.value.length==0?(u(),F(S,{key:0,description:"暂无商铺"})):J("",!0),(u(!0),f(O,null,R(i.value,(s,L)=>(u(),f("div",{key:L,class:"classification-list-item flex gap-4",onClick:Y=>b(s.shopsId)},[a("img",{src:s.shopsImage,alt:"",srcset:"",class:"w-1/3 min-h-[80px] rounded-[10px]"},null,8,z),a("div",G,[a("p",H,[a("span",K,p(s.shopsName),1),a("span",P,p(s.score),1)]),a("p",Q,[a("span",null,"起送："+p(s.shopsStart),1),a("span",null,"运费："+p(s.freight),1)])])],8,M))),128))])])}}});const te=U(W,[["__scopeId","data-v-cba1a0aa"]]);export{te as default};
