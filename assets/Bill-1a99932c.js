import{d as x,v as w,b as L,e as b,n as T,r as a,o as c,c as f,h as t,a as n,t as q,F as C,k as N,j as U,y as d,z as A,A as F,B as O,p as D,l as R,_ as j}from"./index-101ea70f.js";import{u as z}from"./shopStore-6fa85401.js";import{u as E}from"./orderStore-fc24a723.js";const v=l=>(D("data-v-ec3453de"),l=l(),R(),l),G={class:"top-bill"},H={class:"top-bill-return"},M=v(()=>t("div",{class:"top-bill-title"},"外卖配送",-1)),J={class:"top-bill-address"},K=v(()=>t("p",null,[t("span",null,"立即送出"),t("span",{class:"r"},"大概15分钟后抵达")],-1)),P={class:"top-bill-shopList"},Q=x({__name:"Bill",setup(l){const h=z(),i=E(),I=w(),m=L(),_=b(h.baseAddress.name),u=b({foodList:[],money:0}),e=T({address:"",people:"",phone:"",businessesId:""}),y=async()=>{if(e.address)if(e.people){if(!e.phone)return d("请填写联系方式")}else return d("请填写收货人");else return d("请填写收货地址");let r=await i.setOrderStatus({address:_+"--"+e.address,businessesId:e.businessesId,people:e.people,phone:e.phone});A({message:"正在支付请稍候...",forbidClick:!0}),setTimeout(()=>{F(),r?(O("支付成功"),m.push("/Home/Index")):d("支付失败")},2e3)},S=()=>{m.go(-1)};return(()=>{e.businessesId=I.query.businessesId;const r=i.orderList.find(o=>o.businessesId==e.businessesId&&o.status=="apply");u.value=r})(),(r,o)=>{const V=a("van-icon"),g=a("van-notice-bar"),p=a("van-field"),B=a("van-card"),k=a("van-submit-bar");return c(),f("div",G,[t("div",H,[n(V,{name:"arrow-left",onClick:S})]),n(g,{scrollable:"",text:"为减少接触，降低风险，请注意与外卖人员的安全距离。"}),M,t("div",J,[t("p",null,q(_.value),1),n(p,{modelValue:e.address,"onUpdate:modelValue":o[0]||(o[0]=s=>e.address=s),name:"address",label:"详细地址",placeholder:"详细地址",rules:[{required:!0,message:"请填写详细地址"}]},null,8,["modelValue"]),n(p,{modelValue:e.people,"onUpdate:modelValue":o[1]||(o[1]=s=>e.people=s),label:"收货人",name:"people",placeholder:"收货人",rules:[{required:!0,message:"请填写收货人"}]},null,8,["modelValue"]),n(p,{modelValue:e.phone,"onUpdate:modelValue":o[2]||(o[2]=s=>e.phone=s),name:"phone",type:"tel",label:"联系方式",placeholder:"联系方式",rules:[{required:!0,message:"请填写联系方式"}]},null,8,["modelValue"]),K]),t("div",P,[(c(!0),f(C,null,N(u.value.foodList,s=>(c(),U(B,{num:s.foodNum,price:s.foodMoney,desc:s.commodityDescribe,title:s.foodName,thumb:s.foodImageUrl,key:s.foodId},null,8,["num","price","desc","title","thumb"]))),128))]),n(k,{price:u.value.money*100,"button-text":"确认支付",onSubmit:y},null,8,["price"])])}}});const $=j(Q,[["__scopeId","data-v-ec3453de"]]);export{$ as default};
