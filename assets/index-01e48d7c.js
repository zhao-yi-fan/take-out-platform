import{resolveComponent as w,openBlock as l,createBlock as _,withCtx as E,KeepAlive as I,resolveDynamicComponent as f,createApp as v}from"vue";import{d as y,c as P,a as R,s as O,b as A,e as D,f as T,r as U}from"./vendor-07b48c72.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();const V="modulepreload",B=function(e,t){return new URL(e,t).href},h={},i=function(t,o,n){if(!o||o.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(o.map(s=>{if(s=B(s,n),s in h)return;h[s]=!0;const a=s.endsWith(".css"),L=a?'[rel="stylesheet"]':"";if(!!n)for(let m=r.length-1;m>=0;m--){const u=r[m];if(u.href===s&&(!a||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${L}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":V,a||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),a)return new Promise((m,u)=>{c.addEventListener("load",m),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())};const k=(e,t)=>{const o=e.__vccOpts||e;for(const[n,r]of t)o[n]=r;return o},S={};function b(e,t){const o=w("router-view");return l(),_(o,null,{default:E(({Component:n})=>[e.$route.meta.keepAlive?(l(),_(I,{key:0},[(l(),_(f(n)))],1024)):(l(),_(f(n),{key:1}))]),_:1})}const x=k(S,[["render",b]]),N=y("user",{state:()=>({userList:[{userId:1,username:"admin",password:"123456",secret:"111"},{userId:2,username:"zhangsan",password:"123456",secret:""}],loginInfo:null}),getters:{isLogin(){return!!this.loginInfo}},actions:{_findUserByUsername(e){return this.userList.find(t=>t.username===e)},_findUserById(e){return this.userList.find(t=>t.userId===e)},_generateNewUserId(){return this.userList.length===0?1:this.userList[this.userList.length-1].userId+1},setLoginInfo(e){this.loginInfo=e},login(e){const{username:t,password:o}=e,n=this._findUserByUsername(t);return n?n.password!==o?{success:!1,msg:"密码错误"}:(this.loginInfo=n,{success:!0}):{success:!1,msg:"用户不存在"}},register(e){const{username:t,password:o,secret:n}=e;if(this._findUserByUsername(t))return{success:!1,msg:"用户名已存在"};const r=this._generateNewUserId();return this.userList.push({userId:r,username:t,password:o,secret:n}),{success:!0,msg:"注册成功"}},setUserList(e=[]){this.userList=e},forgetPwd(e){const{username:t,password:o,secret:n}=e,r=this._findUserByUsername(t);return r?r.secret!==n?{code:2,msg:"修改失败，暗号错误！"}:(r.password=o,{code:1,msg:"修改成功！"}):{code:3,msg:"修改失败，用户名不存在！"}},setPwd(e){const{userId:t,rawPassword:o,password:n,rePassword:r}=e;if(n!==r)return{code:2,msg:"两次密码输入不一致，请检查后重新提交！"};const s=this._findUserById(t);return s?s.password!==o?{code:2,msg:"原密码输入错误，请检查后重新提交！"}:s.password===n?{code:2,msg:"原密码和新密码不能一样！"}:(s.password=n,{code:1,msg:"修改成功！"}):{code:2,msg:"用户不存在，非法操作！"}}},persist:!0}),C=[{path:"/",redirect:"/home/index"},{path:"/home",name:"home",component:()=>i(()=>import("./home-bcdb2cd4.js"),["./home-bcdb2cd4.js","./prompt-b5ac3cf5.js","./prompt-7c017c22.css","./TabBar.vue_vue_type_script_setup_true_lang-496274f9.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./home-f5db376c.css"],import.meta.url),children:[{path:"/home/index",name:"index",component:()=>i(()=>import("./index-42e488a6.js"),["./index-42e488a6.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./shopStore-2f5b3dd3.js","./index-d50a75aa.css"],import.meta.url)},{path:"/home/order",name:"order",component:()=>i(()=>import("./order-6b61a16c.js"),["./order-6b61a16c.js","./orderStore-7149aad0.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./shopStore-2f5b3dd3.js","./order-5c7a9853.css"],import.meta.url)},{path:"/home/user",name:"user",component:()=>i(()=>import("./user-615c359f.js"),["./user-615c359f.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./user-c03e5fd4.css"],import.meta.url)},{path:"/home/classifica",name:"classifica",component:()=>i(()=>import("./classifica-727f42ae.js"),["./classifica-727f42ae.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./shopStore-2f5b3dd3.js","./classifica-ff31ba1d.css"],import.meta.url)}]},{path:"/commodityDetail",name:"commodityDetail",component:()=>i(()=>import("./commodityDetail-18b92afc.js"),["./commodityDetail-18b92afc.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./prompt-b5ac3cf5.js","./prompt-7c017c22.css","./orderStore-7149aad0.js","./shopStore-2f5b3dd3.js","./collectionStore-a1a4c1eb.js","./commodityDetail-fdef41a8.css"],import.meta.url)},{path:"/billDetail",name:"billDetail",component:()=>i(()=>import("./billDetail-758aad2c.js"),["./billDetail-758aad2c.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./shopStore-2f5b3dd3.js","./orderStore-7149aad0.js","./billDetail-964718e4.css"],import.meta.url)},{path:"/comment",name:"comment",component:()=>i(()=>import("./comment-79d612fb.js"),["./comment-79d612fb.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./shopStore-2f5b3dd3.js","./orderStore-7149aad0.js","./comment-8f38c9a2.css"],import.meta.url)},{path:"/collect",name:"collect",component:()=>i(()=>import("./collect-de5ffbda.js"),["./collect-de5ffbda.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./shopStore-2f5b3dd3.js","./collectionStore-a1a4c1eb.js","./collect-4fd8a42f.css"],import.meta.url)},{path:"/setting",name:"setting",component:()=>i(()=>import("./setting-c0ce1b4e.js"),["./setting-c0ce1b4e.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./setting-203f84dd.css"],import.meta.url)},{path:"/setPwd",name:"setPwd",component:()=>i(()=>import("./setPwd-cef2ab3d.js"),["./setPwd-cef2ab3d.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./setPwd-afb791b7.css"],import.meta.url)},{path:"/search",name:"search",component:()=>i(()=>import("./search-761a14cc.js"),["./search-761a14cc.js","./TabBar.vue_vue_type_script_setup_true_lang-496274f9.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./shopStore-2f5b3dd3.js","./search-7de4bc37.css"],import.meta.url),meta:{keepAlive:!0}},{path:"/newLogin",name:"Login",component:()=>i(()=>import("./NewLogin-abe444a0.js"),["./NewLogin-abe444a0.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./NewLogin-892d16af.css"],import.meta.url)},{path:"/newRegister",name:"Register",component:()=>i(()=>import("./NewRegister-73345951.js"),["./NewRegister-73345951.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./NewRegister-0ce743d5.css"],import.meta.url)},{path:"/forgetPwd",name:"ForgetPwd",component:()=>i(()=>import("./forgetPwd-e517357f.js"),["./forgetPwd-e517357f.js","./vendor-07b48c72.js","./vendor-b2d7e433.css","./forgetPwd-b4a94586.css"],import.meta.url)}],d=P({history:R(),routes:C});d.beforeEach(async(e,t)=>N().isLogin||["index","Login","Register","ForgetPwd"].includes(e.name)?!0:(O("您未登录"),setTimeout(()=>{d.push({name:"Login"})},1e3),!1));const $=""+new URL("img-error-7e6c3f6c.png",import.meta.url).href;window.__imgErrorList__=window.__imgErrorList__||[];window.addEventListener("error",e=>{const t=e.target;if(t&&t.tagName==="IMG"){const o=t;console.error("图片加载失败：",o.src),o.src=$,window.__imgErrorList__.push({src:o.src,time:Date.now(),element:o})}},!0);const g=A();g.use(D({key:e=>`__persisted__${e}`}));const p=v(x);p.use(d);p.use(T);p.use(g);p.mount("#app");U({router:d,DURATION:12e4,callback:()=>{console.log("检测到新版本，请刷新页面")}});export{k as _,N as u};
