import{u as p,_ as V}from"./index-b3ca3edb.js";import"./vendor-c46cc583.js";import"vue";const i={class:"set-pwd"},w={class:"set-pwd-cont"},_={style:{margin:"16px"}},v=Vue.defineComponent({__name:"setPwd",setup(f){const a=p(),u=VueRouter.useRouter(),o=Vue.reactive({rawPassword:"",password:"",rePassword:""}),m=()=>{u.go(-1)},c=async n=>{console.log("submit",n);const{rawPassword:e,password:d,rePassword:t}=n,l={userId:a.loginInfo.userId,rawPassword:e,password:d,rePassword:t},r=await a.setPwd(l);vant.showLoadingToast({message:"正在修改密码请稍候...",forbidClick:!0}),setTimeout(()=>{vant.closeToast(),r.code==1?(vant.showSuccessToast("修改密码成功，请您重新登录"),a.setLoginInfo(null),u.push("/home/user")):vant.showFailToast(r.msg)},2e3)};return(n,e)=>{const d=Vue.resolveComponent("van-nav-bar"),t=Vue.resolveComponent("van-field"),l=Vue.resolveComponent("van-button"),r=Vue.resolveComponent("van-form");return Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[Vue.createVNode(d,{title:"修改密码","left-text":"返回","left-arrow":"",onClickLeft:m}),Vue.createElementVNode("div",i,[Vue.createElementVNode("div",w,[Vue.createVNode(r,{onSubmit:c},{default:Vue.withCtx(()=>[Vue.createVNode(t,{modelValue:o.rawPassword,"onUpdate:modelValue":e[0]||(e[0]=s=>o.rawPassword=s),name:"rawPassword",label:"原密码",placeholder:"原密码",rules:[{required:!0,message:"请填写原密码"}]},null,8,["modelValue"]),Vue.createVNode(t,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=s=>o.password=s),type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),Vue.createVNode(t,{modelValue:o.rePassword,"onUpdate:modelValue":e[2]||(e[2]=s=>o.rePassword=s),type:"password",name:"rePassword",label:"重新输入密码",placeholder:"重新输入密码",rules:[{required:!0,message:"请再次填写密码"}]},null,8,["modelValue"]),Vue.createElementVNode("div",_,[Vue.createVNode(l,{round:"",block:"",type:"info","native-type":"submit"},{default:Vue.withCtx(()=>[...e[3]||(e[3]=[Vue.createTextVNode("提交",-1)])]),_:1})])]),_:1})])])],64)}}});const N=V(v,[["__scopeId","data-v-437e8e69"]]);export{N as default};
