import{showLoadingToast as f,closeToast as v,showSuccessToast as P,showFailToast as g}from"vant";import{useRouter as b}from"vue-router";import{d as V,k as x,l as y,r as n,o as h,c as k,a as o,g as p,w as i,h as T,F as C,_ as I}from"./index-7a5bb6f9.js";const F={class:"set-pwd"},S={class:"set-pwd-cont"},U={style:{margin:"16px"}},q=V({__name:"setPwd",setup(B){const l=x(),c=b(),s=y({rawPassword:"",password:"",rePassword:""}),w=()=>{c.go(-1)},_=async d=>{console.log("submit",d);const{rawPassword:e,password:u,rePassword:t}=d,m={userId:l.loginInfo.userId,rawPassword:e,password:u,rePassword:t},r=await l.setPwd(m);f({message:"正在修改密码请稍候...",forbidClick:!0}),setTimeout(()=>{v(),r.code==1?(P("修改密码成功，请您重新登录"),l.setLoginInfo(null),c.push("/home/user")):g(r.msg)},2e3)};return(d,e)=>{const u=n("van-nav-bar"),t=n("van-field"),m=n("van-button"),r=n("van-form");return h(),k(C,null,[o(u,{title:"修改密码","left-text":"返回","left-arrow":"",onClickLeft:w}),p("div",F,[p("div",S,[o(r,{onSubmit:_},{default:i(()=>[o(t,{modelValue:s.rawPassword,"onUpdate:modelValue":e[0]||(e[0]=a=>s.rawPassword=a),name:"rawPassword",label:"原密码",placeholder:"原密码",rules:[{required:!0,message:"请填写原密码"}]},null,8,["modelValue"]),o(t,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=a=>s.password=a),type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),o(t,{modelValue:s.rePassword,"onUpdate:modelValue":e[2]||(e[2]=a=>s.rePassword=a),type:"password",name:"rePassword",label:"重新输入密码",placeholder:"重新输入密码",rules:[{required:!0,message:"请再次填写密码"}]},null,8,["modelValue"]),p("div",U,[o(m,{round:"",block:"",type:"info","native-type":"submit"},{default:i(()=>[...e[3]||(e[3]=[T("提交",-1)])]),_:1})])]),_:1})])])],64)}}});const E=I(q,[["__scopeId","data-v-437e8e69"]]);export{E as default};
