import{d as u,b as p}from"./vendor-c46cc583.js";import{u as h}from"./shopStore-1a87daf4.js";const m=u("order",{state:()=>({orderList:[{businessesId:1,shopsId:13,userId:1,status:"success",address:"长沙湖南工业职业技术学院",people:"xxx",phone:"18974868294",foodList:[{foodId:"1_1",foodMoney:12.5,foodName:"汉堡",foodNum:3,foodImageUrl:"https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=3285227120,3432336058&fm=26&gp=0.jpg"}],money:37.5,evaluate:{content:"唉呀妈呀相当好吃",score:4.5},createDate:"2021-01-06 08:41:39",sendDate:"2021-01-06 08:56:39"}]}),getters:{},actions:{setOrderList(t){this.orderList=t},getMyOrder(t={}){const o=h();return this.orderList.filter(s=>s.userId==t&&s.status=="success").map((s,i)=>{const e=o.shopsList.find(n=>n.shopsId==s.shopsId);return{...s,shopsInfo:e||{}}})},setOrderInfo(t){let{userId:o,shopsId:d,money:s,foodList:i}=t,e=this.orderList[this.orderList.length-1].businessesId;return e++,this.orderList.push({businessesId:e,shopsId:d,userId:o,foodList:i,money:s,status:"apply",evaluate:{content:"",score:null},address:"",people:"",phone:"",createDate:"",sendDate:""}),{code:1,businessesId:e}},setOrderStatus(t={}){let{businessesId:o,address:d,people:s,phone:i}=t,e=!1,n=this.orderList,r=n.find((a,c)=>a.businessesId==o);if(r){let a=p();r.status="success",r.address=d,r.people=s,r.phone=i,r.createDate=a.format("YYYY-MM-DD hh:mm:ss"),r.sendDate=a.add(15,"minute").format("YYYY-MM-DD hh:mm:ss"),e=!0}return this.setOrderList(n),e}},persist:!0});export{m as u};
